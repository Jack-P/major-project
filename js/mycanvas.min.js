$("#shape").change(function(){function w(a){e.fillStyle=a,e.strokeStyle=a;var b=document.getElementsByClassName("activated")[0];b&&(b.className="palette")}function x(a){var b=a.target;w(b.style.backgroundColor),b.className+=" activated"}var a=$(this).val();if($(".clear-appear").fadeOut(300),$(".canvas-opt").fadeOut(300),$("#hide-on-canvas").slideDown(300),"canvas"==a){$("#hide-on-canvas").slideUp(300),$(".canvas-opt").fadeIn(300),$(".clear-appear").hide().html('<a id="clear" href="#" class="button">Clear Drawing</a>').fadeIn(300),$(".canvas-opt").html('<div id="color-wrap" class="large-8 columns">\x3c!-- Colour palettes will appear here --\x3e</div><div id="radius" class="large-4 columns"><div class="radControl"><i id="lowerRadius" class="fi-minus"></i></div><span style="margin-left: 10px;">Brush Size</span><span style="padding: 0 10px 0 5px;" id="radVal">15</span><div class="radControl"><i id="addRadius" class="fi-plus"></i></div></div>');var b=document.createElement("canvas"),c=document.getElementById("obj");b.id="cArea",b.className="myCanvas",b.width=c.offsetWidth,b.height=c.offsetHeight,b.style.cssText="background-color: transparent;",$(c).html(b);var d=document.getElementById("cArea"),e=d.getContext("2d"),f=15,g=!1;e.lineWidth=2*f;var h=function(a){g&&(e.lineTo(a.offsetX,a.offsetY),e.stroke(),e.beginPath(),e.arc(a.offsetX,a.offsetY,f,0,2*Math.PI),e.fill(),e.beginPath(),e.moveTo(a.offsetX,a.offsetY))},i=function(a){g=!0,h(a)},j=function(){g=!1,e.beginPath()};d.addEventListener("mousedown",i),d.addEventListener("mouseup",j),d.addEventListener("mousemove",h);var k=function(a){a<l&&(a=l),a>m&&(a=m),f=a,e.lineWidth=2*f,p.innerHTML=f},l=null,m=50,o=5,p=document.getElementById("radVal"),q=document.getElementById("lowerRadius"),r=document.getElementById("addRadius");q.addEventListener("click",function(){k(f-o)}),r.addEventListener("click",function(){k(f+o)});var s=["#F2F2F2","#888888","#8884ff","#f4d35e","#ee964b","#f15156","#50ED65"],t=document.createElement("div");t.id="colour",document.getElementById("color-wrap").appendChild(t);for(var u=0;u<s.length;u++){var v=document.createElement("div");v.className="palette",v.style.backgroundColor=s[u],v.addEventListener("click",x),document.getElementById("colour").appendChild(v)}document.getElementById("clear").onclick=function(){var b=(document.createElement("canvas"),document.getElementById("cArea"));e.clearRect(0,0,b.offsetWidth,b.offsetHeight)}}});